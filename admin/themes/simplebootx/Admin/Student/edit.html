<admintpl file="header" />
</head>
<body>
<div class="wrap">
	<ul class="nav nav-tabs">
		<li><a href="{:U('Admin/Student/index')}">{:L('STUDENT_USER_INDEX')}</a></li>
		<li><a href="{:U('Admin/Student/add')}">{:L('STUDENT_USER_ADD')}</a></li>
		<li class="active"><a href="{:U('Admin/Student/edit',array('id'=>$id))}">编辑学员</a></li>
	</ul>
	<form method="post" class="form-horizontal js-ajax-form" action="{:U('Admin/Student/edit_post')}">
		<fieldset>
			<h4 class="lighter">
				<i class="icon-hand-right icon-animated-hand-pointer blue"></i>
				<a href="" data-toggle="modal" class="pink">学生信息</a>
			</h4>
			<div class="row-fluid">
				<div class="span6">
					<div class="control-group">
						<label class="control-label">{:L('STUDENT_NAME')}</label>
						<div class="controls">
							<input type="text" name="name" value="{$info.name}" placeholder="请输入{:L('STUDENT_NAME')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('STUDENT_SEX')}:</label>
						<div class="controls">
							<php>
								$sex1=$info['sex']==1?"checked":"";
								$sex2=$info['sex']==2?"checked":"";
							</php>
							<label class="radio"><input type="radio" name="sex" value="1" {$sex1}>男</label>
							<label class="radio"><input type="radio" name="sex" value="2" {$sex2}>女</label>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('STUDENT_AGE')}:</label>
						<div class="controls">
							<input type="text" name="age" value="{$info.age}" placeholder="请输入{:L('STUDENT_AGE')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('STUDENT_MOBILE')}:</label>
						<div class="controls">
							<input type="text" name="mobile" value="{$info.mobile}" placeholder="请输入{:L('STUDENT_MOBILE')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('BIRTHDAY')}:</label>
						<div class="controls">
							<input class="js-date" type="text" id="input-birthday" value="{$info.birthday}" placeholder="请输入{:L('BIRTHDAY')}" name="birthday">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('ADDRESS')}:</label>
						<div class="controls">
							<input type="text" name="address" value="{$info.address}" placeholder="请输入{:L('ADDRESS')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('APPLY_DATE')}:</label>
						<div class="controls">
							<input class="js-date" type="text" id="input-apply-date" value="{$info.apply_date}" placeholder="请输入{:L('APPLY_DATE')}" name="apply_date">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('LECTURE_SETTING')}:</label>
						<div class="controls">
							<input type="text" name="lecture_setting" value="{$info.lecture_setting}"  placeholder="请输入{:L('LECTURE_SETTING')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('TIME_CONSUMING_REMINDER')}:</label>
						<div class="controls">
							<input type="text" name="time_consuming_reminder" value="{$info.time_consuming_reminder}" placeholder="请输入{:L('TIME_CONSUMING_REMINDER')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('CARD_INFO')}:</label>
						<div class="controls">
							<input type="text" name="card_info" value="{$info.card_info}" placeholder="请输入{:L('CARD_INFO')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('CLASS_NAME')}:</label>
						<div class="controls">
							<select name="class">
								<option value="0">请选择</option>
								<foreach name="classList" item="vo">
									<option value="{$vo.id}" {$vo.selected}>{$vo.name}</option>
								</foreach>
							</select>
						</div>
					</div>
				</div>
				<div class="span6">
					<div class="control-group">
						<label class="control-label">{:L('STUDENT_NUMBER')}:</label>
						<div class="controls">
							<input type="text" name="number" value="{$info.number}" placeholder="请输入{:L('STUDENT_NUMBER')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('COURSE')}</label>
						<div class="controls">
							<input type="text" name="course" value="{$info.course}" placeholder="请输入{:L('COURSE')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('TUITION')}:</label>
						<div class="controls">
							<input type="text" name="tuition" value="{$info.tuition}" placeholder="请输入{:L('TUITION')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('BUY_CLASS_HOUR')}:</label>
						<div class="controls">
							<input type="text" name="class_hour" value="{$info.class_hour}" placeholder="请输入{:L('BUY_CLASS_HOUR')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('UNIT_PRICE')}:</label>
						<div class="controls">
							<input type="text" name="unit_price" value="{$info.unit_price}" placeholder="请输入{:L('UNIT_PRICE')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('CONSUME_HOUR')}:</label>
						<div class="controls">
							<input type="text" name="consume_hour" value="{$info.consume_hour}" placeholder="请输入{:L('CONSUME_HOUR')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('SURPLUS_HOUR')}:</label>
						<div class="controls">
							<input type="text" name="surplus_hour" value="{$info.surplus_hour}" placeholder="请输入{:L('SURPLUS_HOUR')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('COURSE_CONSULTANT')}:</label>
						<div class="controls">
							<select name="course_consultant">
								<option value="0">请选择</option>
								<foreach name="staffList" item="vo">
									<option value="{$vo.id}" {$vo.selected}>{$vo.name}</option>
								</foreach>
							</select>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('KINDERGARTEN')}:</label>
						<div class="controls">
							<input type="text" name="kindergarten" value="{$info.kindergarten}" placeholder="请输入{:L('KINDERGARTEN')}">
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('HIRE_PURCHASE')}:</label>
						<div class="controls">
							<php>
								$hirePurchase1=$info['hire_purchase']==1?"checked":"";
								$hirePurchase2=$info['hire_purchase']==0?"checked":"";
							</php>
							<label class="radio"><input type="radio" name="hire_purchase" value="1" {$hirePurchase1}>是</label>
							<label class="radio"><input type="radio" name="hire_purchase" value="0" {$hirePurchase2}>否</label>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">{:L('IN_SCHOOL')}:</label>
						<div class="controls">
							<select name="school">
								<option value="0">请选择</option>
								<foreach name="schoolList" item="vo">
									<option value="{$vo.id}" {$vo.selected}>{$vo.name}</option>
								</foreach>
							</select>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">停课:</label>
						<div class="controls">
							<php>
								$class_end1=$info['class_end']==1?"checked":"";
								$class_end2=$info['class_end']==0?"checked":"";
							</php>
							<label class="radio"><input type="radio" name="class_end" value="0" {$class_end2}>否</label>
							<label class="radio"><input type="radio" name="class_end" value="1" {$class_end1}>是</label>
						</div>
					</div>
				</div>
			</div>
			<div class="hr hr-18 hr-double dotted"></div>
			<h4 class="lighter">
				<i class="icon-hand-right icon-animated-hand-pointer blue"></i>
				<a href="#" data-toggle="modal" class="pink">家长信息</a>
			</h4>
			<div class="row-fluid">
				<div class="span12">
					<a href="#" rel="external nofollow" rel="external nofollow" rel="external nofollow" id="AddMoreFileBox" class="btn btn-info">添加更多</a></span></p>
					<div id="InputsWrapper">
						<foreach name="parentList" key="k" item="vo">
						<div>
							<input type="text" name="parentName[]" id="parentName_{$k+1}" value="{$vo.name}" placeholder="家长姓名"/>
							<input type="text" name="relationship[]" id="relationship_{$k+1}" value="{$vo.relationship}" placeholder="关系"/>
							<input type="text" name="phone[]" id="phone_{$k+1}" value="{$vo.phone}" placeholder="手机"/>
							<input type="text" name="guardian[]" id="guardian_{$k+1}" value="{$vo.guardian}" placeholder="监护人"/>
							<a href="#" rel="external nofollow" rel="external nofollow" rel="external nofollow" class="removeclass">
								<input type='button' value='删除'>
							</a>
						</div>
						</foreach>
					</div>
				</div>
			</div>
		</fieldset>
		<div class="form-actions">
			<input type="hidden" name="id" value="{$id}" />
			<button type="submit" class="btn btn-primary js-ajax-submit">{:L('SAVE')}</button>
			<a class="btn" href="javascript:history.back(-1);">{:L('BACK')}</a>
		</div>
	</form>
</div>
<script src="__PUBLIC__/js/common.js"></script>
<script>
    $(document).ready(function() {
        var MaxInputs    = 11; //maximum input boxes allowed
        var InputsWrapper  = $("#InputsWrapper"); //Input boxes wrapper ID
        var AddButton    = $("#AddMoreFileBox"); //Add button ID
        var x = InputsWrapper.length; //initlal text box count
        var FieldCount=1; //to keep track of text box added
        $(AddButton).click(function (e) //on add input button click
        {
            if(x <= MaxInputs) //max input box allowed
            {
                FieldCount++; //text box added increment
                //add input box
                $(InputsWrapper).append(
                    '<br/><div>' +
                    '<input type="text" name="parentName[]" id="parentName_'+ FieldCount +'" placeholder="家长姓名"/> ' +
                    '<input type="text" name="relationship[]" id="relationship_'+ FieldCount +'" placeholder="关系"/> ' +
                    '<input type="text" name="phone[]" id="phone_'+ FieldCount +'" placeholder="手机"/> ' +
                    '<input type="text" name="guardian[]" id="guardian_'+ FieldCount +'" placeholder="监护人"/> ' +
                    '<a href="#" rel="external nofollow" rel="external nofollow" rel="external nofollow" class="removeclass">' +
                    '<input type="button" value="删除">' +
                    '</a>' +
                    '</div>'
                );
                x++; //text box increment
            }
            return false;
        });
        $("body").on("click",".removeclass", function(e){ //user click on remove text
            if( x > 1 ) {
                $(this).parent('div').remove(); //remove text box
                x--; //decrement textbox
            }
            return false;
        })
    });
</script>
</body>
</html>